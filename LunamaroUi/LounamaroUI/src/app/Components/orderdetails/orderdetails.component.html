<div class="container mt-4" *ngIf="orderDetails">

  <div class="card mb-4 shadow-sm">
    <div class="card-header bg-primary text-white">
      <h4>Order #{{ orderDetails.orderId }}</h4>
    </div>

    <div class="card-body">
      <div class="row mb-3">
        <div class="col-md-6">
          <p><strong>Date:</strong> {{ orderDetails.dateOfOrder | date:'medium' }}</p>
          <p><strong>Status:</strong> 
            <span class="badge" [ngClass]="{
              'bg-warning': orderDetails.orderStatus === 'Pending',
              'bg-success': orderDetails.orderStatus === 'Delivered',
              'bg-danger': orderDetails.orderStatus === 'Cancelled'
            }">
              {{ orderDetails.orderStatus }}
            </span>
          </p>
        </div>
        <div class="col-md-6 text-md-end">
          <p><strong>Total Amount:</strong> {{ orderDetails.totalAmount | currency:'EGP':'symbol':'1.0-0' }}</p>
        </div>
      </div>

      <h5>Items</h5>
      <table class="table table-bordered table-hover align-middle">
        <thead class="table-dark">
          <tr>
            <th scope="col">Image</th>
            <th scope="col">Product</th>
            <th scope="col">Quantity</th>
            <th scope="col">Unit Price</th>
            <th scope="col">Total</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let item of orderDetails.orderItems">
            <td>
              <img [src]="'http://localhost:5218' + item.imgUrl" alt="{{ item.productName }}" class="product-img">
            </td>
            <td>{{ item.productName }}</td>
            <td>{{ item.quantity }}</td>
            <td>{{ item.price | currency:'EGP':'symbol':'1.0-0' }}</td>
            <td>{{ (item.price * item.quantity) | currency:'EGP':'symbol':'1.0-0' }}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <button class="btn btn-secondary" routerLink="/user/orders">
    ‚Üê Back to Order History
  </button>
</div>

<div *ngIf="!orderDetails" class="text-center mt-5">
  <div class="spinner-border text-primary" role="status"></div>
  <p class="mt-2">Loading order details...</p>
</div>
